{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/services/manager/screen.ts","webpack:///./src/services/env.ts","webpack:///./src/services/manager/uimgr.ts","webpack:///./src/services/navigator/stack.ts","webpack:///./src/services/hook.ts","webpack:///./src/services/display/ui.ts","webpack:///./src/services/manager/bg.ts","webpack:///./src/services/navigator/loader.ts","webpack:///./src/services/navigator/init.ts","webpack:///./src/services/js.ts","webpack:///./src/utils/onload.ts","webpack:///./src/services/pipeline.ts","webpack:///./src/utils/any.ts","webpack:///./src/services/display/popupmanager.ts","webpack:///./src/services/display/toastmanager.ts","webpack:///./src/index.ts","webpack:///./src/adapter/index.ts","webpack:///./src/adapter/_transsion.ts","webpack:///./src/polyfill.ts","webpack:///./src/services/manager/eft.ts","webpack:///./src/services/audio.ts","webpack:///./src/utils/looper.ts","webpack:///./src/services/event.ts","webpack:///./src/services/runtime.ts","webpack:///./src/services/message.ts","webpack:///./src/services/utils.ts","webpack:///./src/services/display/activity.ts","webpack:///./src/services/display/popupview.ts","webpack:///./src/services/display/toastview.ts","webpack:///./src/services/lifecycle.ts","webpack:///./src/utils/visibility.ts","webpack:///./src/utils/query.ts","webpack:///./src/services/init.ts"],"names":["root","factory","exports","module","define","amd","a","i","this","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_padding_left","_padding_right","_padding_top","_padding_bottom","_design_width","_design_height","_deviation","_adaption","size","paddingWidth","paddingHeight","clientWidth","window","innerWidth","laya","utils","Browser","clientHeight","innerHeight","initWidth","initHeight","screenRatio","initRatio","Math","abs","getWidth","Laya","stage","width","getHeight","height","getDesignWidth","getDesignHeight","getScale","designWidth","designHeight","min","is3D","Laya3D","init","apply","options","scaleMode","Stage","SCALE_EXACTFIT","screenMode","SCREEN_HORIZONTAL","SCREEN_VERTICAL","alignH","ALIGN_CENTER","alignV","ALIGN_MIDDLE","initBg","initUI","getOffestX","scale","getOffestY","setDeviation","deviation","setPaddingLeft","padding","getPaddingLeft","setPaddingRight","getPaddingRight","setPaddingTop","getPaddingTop","setPaddingBottom","getPaddingBottom","setAdaption","adaption","_debugOn","isDebug","indexOf","_env","classNameMap","obj","str","toString","arr","charAt","match","length","e","isLayaApp","isConchApp","getVersion","setDebug","debug","printError","message","console","error","printDebug","log","getEnv","setEnv","env","_uiManager","_mainUILayer","_topUILayer","_inited","_checkInit","Sprite","mouseThrough","addChild","on","Event","RESIZE","_resizeUI","x","y","scaleX","scaleY","checkFocus","numChildren","getChildAt","setFocus","moveTopToMainLayer","view","parent","removeChild","addViewToMainLayer","addViewTopLayer","_loaders","_all","_length","_getStack","index","len","_showStack","anim","callback","stack","show","_refreshStack","hide","_popStack","count","splice","forEach","element","exit","focus","navigate","page","params","action","single","open","onShow","onLoaded","loader","push","onLoadProgress","progress","nextProgress","stacks","filter","pop","number","popToTop","finish","instance","_finishStack","_inits","_shows","_hides","args","onInit","onHide","handleOnTouchOutside","_bgSprite","_bgAlpha","_bgColor","_isTranslucent","_isShow","_handleOnTouchOutside","_canceledOnTouchOutside","_mask","_onEvent","isShow","canceledOnTouchOutside","stopPropagation","setTimeout","ui","getChildByName","removeChildByName","bgAlpha","refreshBg","bgColor","isTranslucent","refreshCanceledOnTouchOutside","nonPenetrating","alpha","graphics","clear","drawRect","offAll","CLICK","addChildAt","Component","_bgImage","_bgSkin","_bgSizeGrid","_drawSkin","skin","sizeGrid","_resizeBg","Image","setBgSkin","url","setBgColor","color","setBgTexture","load","Handler","texture","fillTexture","getBgSprite","_indexID","_options","_activity","_isFocus","_pageName","visible","getClassName","_getPageName","res","_newActivity","_onLoaded","_onLoadProgress","onNavigatorReady","then","onCreate","onNextProgress","activity","easeIn","Ease","linearIn","duration","fromProps","toProps","assign","onResume","Tween","to","onPause","onDestroy","destroy","onFocus","_isReady","_readyResolve","_readyPromise","Promise","resolve","_beginLoadStaticRes","commonRes","_onStaticResLoaded","mainPage","fileVersion","ResourceVersion","type","FILENAME_VERSION","enable","loadJs","jspath","onload","undefined","jsList","split","nodeList","js","_protocol","location","protocol","_script","document","createElement","keys","setAttribute","src","body","appendChild","onerror","err","_loadJS","node","_ready","reslove","reject","_timer","_pollingDocument","readyState","clearTimeout","Date","now","_pipeline_map","_check","pipe","funcs","func","shift","put","next","def","JSON","parse","ex","parseFloat","isNaN","_inferType","_toNumber_","_toBoolean_","_toObject_","stringify","_toString_","_popups","_fromProps","_toProps","_exitProps","_hidePopup","result","popupView","cb","from","exitProps","easeOut","linearOut","_hidePopupAnim","_onHide","popup","removeSelf","_showPopup","_showPopupAnim","setDefaultAnim","showPopup","alias","mapKey","views","hidePopup","v","_toasts","_popToast","toast","showToast","_on_hide","displayDuration","_pushToast","hideToast","OHOGame","init3D","start","getQueryString","bg","eft","screen","audio","event","runtime","pipeline","navigator","Activity","PopupView","ToastView","Loader","HttpRequest","cache","group","ignoreCache","_url","_type","getTypeFromUrl","URL","formatURL","_cache","_data","loadedMap","setGroup","parserMap","_customParse","runWith","_loadImage","_loadSound","_loadTTF","loadRuntime","startsWith","that","response","substr","rt","getFileSystemManager","readFileSync","contentType","preLoadedMap","_http","onProgress","onError","send","info","rw","rh","target","varArgs","TypeError","arguments","nextSource","nextKey","writable","configurable","_dic","Dictionary","_mcpool","_inst","onLoadComplet","path","mc","play","loop","loadComplet","thisRef","stop","off","LOADED","MovieClip","remove","pivotX","pivotY","clearAll","_auidoUrl","_chancel","_playing","_onPlay","_onPause","_onStop","_onError","_onProgress","_onComplete","_position","_duration","_paused","_playTime","_update","position","onPlay","onStop","onComplete","isPaused","isPlaying","loops","invoke","fixWechatAudioPlay","playUrl","targetUrl","replaceExt","ext","Utils","getFileExtension","searchExt","SoundManager","playSound","pause","resume","removeChannel","destroySound","_musicAudio","AudioController","playMusic","stopAll","stopMusic","stopAllSound","_tasks","_hasLoop","_checkLoop","timer","frameLoop","task","caller","array","where","reverse","removeItemForWhere","Looper","registeredEvent","fun","sort","b","removeEvent","sendEvent","EventDispatcher","viewScale","pivot","pivotCenter","scaleTime","onClick","onDown","onUp","onOut","sound","clickSound","MOUSE_DOWN","scaleSmallValue","MOUSE_UP","scaleBigValue","MOUSE_OUT","bindClick","Button","btn","btn_img","Label","btn_label","btn_sprite","Box","btn_box","_listeners","data","toAny","addEventListener","msg","postMessage","conchMarket","sendMessageToPlatform","resp","onMessage","randomArrayItem","source","floor","random","randomUUID","_s4","substring","randomInteger","minNum","maxNum","randomNumber","randomArray","randomLength","copy","concat","randomObj","back","opts","NewAct","redirectTo","signleShow","pipeShow","_isshow","_caller_show","_caller_hide","callShow","callHookShow","_initLifecycle","onVisibility","visibility","callHookHide","fixVisibility","offShow","offHide","hidden","visibilityChange","_init","isVisibility","CustomEvent","visibilityEvent","bubbles","cancelable","dispatchEvent","queryString","indexE","indexW","indexQ","map","item","decodeURIComponent","query","encodeURIComponent","join","reduce","search","reg","RegExp","unescape","initScreen","callHookInit","callStart","newOptions","initNavigator","setNavigatorReady","vConsole","catch"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","import { initBg } from \"./bg\";\nimport { initUI } from \"./uimgr\";\n\nlet _padding_left = 0;\nlet _padding_right = 0;\nlet _padding_top = 0;\nlet _padding_bottom = 0;\n\nlet _design_width = 0;\nlet _design_height = 0;\nlet _deviation = 0.01;\nlet _adaption = true;\n\nfunction size() {\n    let paddingWidth = _padding_left + _padding_right;\n    let paddingHeight = _padding_top + _padding_bottom;\n    let clientWidth = window.innerWidth || laya.utils.Browser.clientWidth;\n    let clientHeight = window.innerHeight || laya.utils.Browser.clientHeight;\n    let initWidth = _design_width;\n    let initHeight = _design_height;\n    let screenRatio = 1;\n    let initRatio = 1;\n    if (_design_width < _design_height && clientWidth < clientHeight) { // 页面和游戏都是竖屏\n        screenRatio = clientHeight / clientWidth\n        initRatio = _design_height / _design_width\n        if (Math.abs(screenRatio / initRatio - 1) > _deviation) {\n            if (screenRatio > initRatio) {\n                initHeight = _design_width * screenRatio;\n            } else if (screenRatio < initRatio) {\n                initWidth = _design_height / screenRatio;\n            }\n        }\n    } else if (_design_width < _design_height && clientWidth >= clientHeight) { // 页面横屏，游戏竖屏\n        screenRatio = clientHeight / clientWidth\n        initRatio = _design_width / _design_height;\n        if (Math.abs(screenRatio / initRatio - 1) > _deviation) {\n            if (screenRatio > initRatio) {\n                initWidth = _design_height * screenRatio;\n            } else if (screenRatio < initRatio) {\n                initHeight = _design_width / screenRatio;\n            }\n        }\n    } else if (_design_width >= _design_height && clientWidth >= clientHeight) { // 页面和游戏都是横屏\n        screenRatio = clientHeight / clientWidth\n        initRatio = _design_height / _design_width\n        if (Math.abs(screenRatio / initRatio - 1) > _deviation) {\n            if (screenRatio > initRatio) {\n                initHeight = _design_width * screenRatio;\n            } else if (screenRatio < initRatio) {\n                initWidth = _design_height / screenRatio;\n            }\n        }\n    } else if (_design_width >= _design_height && clientWidth < clientHeight) { // 页面竖屏，游戏横屏\n        screenRatio = clientHeight / clientWidth\n        initRatio = _design_width / _design_height;\n        if (Math.abs(screenRatio / initRatio - 1) > _deviation) {\n            if (screenRatio > initRatio) {\n                initWidth = _design_height * screenRatio;\n            } else if (screenRatio < initRatio) {\n                initHeight = _design_width / screenRatio;\n            }\n        }\n    }\n    return {\n        initHeight: initHeight + paddingHeight,\n        initWidth: initWidth + paddingWidth\n    }\n}\n\nexport function initScreen(is3D, width, height, ...options) {\n    _design_width = width;\n    _design_height = height;\n    if (_adaption) {\n        let { initHeight, initWidth } = size();\n        if (is3D) {\n            Laya3D.init.apply(this, [initWidth, initHeight, ...options]);\n        } else {\n            Laya.init.apply(this, [initWidth, initHeight, ...options]);\n        }\n        Laya.stage.scaleMode = Laya.Stage.SCALE_EXACTFIT;\n        if (initWidth > initHeight) {\n            Laya.stage.screenMode = Laya.Stage.SCREEN_HORIZONTAL;\n        } else {\n            Laya.stage.screenMode = Laya.Stage.SCREEN_VERTICAL;\n        }\n        Laya.stage.alignH = Laya.Stage.ALIGN_CENTER;\n        Laya.stage.alignV = Laya.Stage.ALIGN_MIDDLE;\n    } else {\n        if (is3D) {\n            Laya3D.init.apply(this, [width, height, ...options]);\n        } else {\n            Laya.init.apply(this, [width, height, ...options]);\n        }\n    }\n    initBg();\n    initUI();\n}\n\nfunction getWidth() {\n    return Laya.stage.width;\n}\n\nfunction getHeight() {\n    return Laya.stage.height;\n}\n\nfunction setPaddingLeft(padding) {\n    _padding_left = padding;\n}\n\nfunction getPaddingLeft() {\n    return _padding_left;\n}\n\nfunction setPaddingRight(padding) {\n    _padding_right = padding;\n}\n\nfunction getPaddingRight() {\n    return _padding_right;\n}\n\nfunction setPaddingTop(padding) {\n    _padding_top = padding;\n}\n\nfunction getPaddingTop() {\n    return _padding_top;\n}\n\nfunction setPaddingBottom(padding) {\n    _padding_bottom = padding;\n}\n\nfunction getPaddingBottom() {\n    return _padding_bottom;\n}\n\nfunction getDesignWidth() {\n    return _design_width;\n}\n\nfunction getDesignHeight() {\n    return _design_height;\n}\n\nfunction getScale() {\n    let width = getWidth();\n    let height = getHeight();\n    let designWidth = getDesignWidth();\n    let designHeight = getDesignHeight();\n    return Math.min(width / designWidth, height / designHeight);\n}\n\nfunction getOffestX() {\n    if (!_adaption) {\n        return _padding_left;\n    }\n    let scale = getScale();\n    let width = getWidth();\n    return (width - _design_width * scale) / 2 + _padding_left;\n}\n\nfunction getOffestY() {\n    if (!_adaption) {\n        return _padding_top;\n    }\n    let scale = getScale();\n    let height = getHeight();\n    return (height - _design_height * scale) / 2 + _padding_top;\n}\n\nfunction setDeviation(deviation) {\n    _deviation = deviation;\n}\n\nfunction setAdaption(adaption) {\n    _adaption = adaption;\n}\n\nexport default {\n    getWidth,\n    getHeight,\n    getScale,\n    getOffestX,\n    getOffestY,\n    getDesignWidth,\n    getDesignHeight,\n    setDeviation,\n    setPaddingLeft,\n    getPaddingLeft,\n    setPaddingRight,\n    getPaddingRight,\n    setPaddingTop,\n    getPaddingTop,\n    setPaddingBottom,\n    getPaddingBottom,\n    setAdaption,\n}","\n//////////////////////////\n/////  Env\n//////////////////////////\n\nconst isLayaApp = () => {\n    if (typeof window !== \"undefined\") {\n        return window.hasOwnProperty(\"Laya\");\n    }\n    return false;\n}\n\nconst isConchApp = () => {\n    if (typeof window !== \"undefined\") {\n        return window.hasOwnProperty(\"conch\");\n    }\n    return false;\n}\n\n//////////////////////////\n/////  Version\n//////////////////////////\n\nlet _lib_version = \"1.0.11\";\n\nfunction getVersion(): string {\n    if (_lib_version.indexOf('${') === 0) {\n        return '1.0.0';\n    }\n    return _lib_version;\n}\n\n//////////////////////////\n/////  Debug\n//////////////////////////\n\nlet _debugOn = '${debug}';\n\nfunction isDebug() {\n    if (_debugOn.indexOf('${') === 0) {\n        return false;\n    }\n    if (_debugOn == \"false\" || _debugOn == \"0\") {\n        return false;\n    }\n    return !!_debugOn;\n}\n\nfunction setDebug(debug) {\n    _debugOn = debug;\n}\n\nfunction printDebug(message: any, ...options) {\n    if (isDebug()) {\n        console.log(\"[OHOGame] \", message, ...options);\n    }\n}\n\nfunction printError(message: any, ...options) {\n    if (isDebug()) {\n        console.error(\"[OHOGame] \", message, ...options);\n    }\n}\n\n//////////////////////////\n/////  Env\n//////////////////////////\n\nlet _env = '${env}';\n\nfunction setEnv(env) {\n    _env = env;\n}\n\nfunction getEnv() {\n    if (_env.indexOf('${') === 0) {\n        return \"dev\";\n    }\n    return _env;\n}\n\n//////////////////////////\n/////  getClassName\n//////////////////////////\n\nlet classNameMap = {};\n\nexport function getClassName(obj) {\n    try {\n        if (obj) {\n            if (obj.name) {\n                return obj.name;\n            }\n            if (classNameMap[obj]) {\n                return classNameMap[obj];\n            }\n            let str = obj.toString();\n            let arr;\n            if (str.charAt(0) == '[') {\n                arr = str.match(/\\w+\\s∗(\\w+)\\w+\\s∗(\\w+)/);\n            } else {\n                arr = str.match(/function\\s*(\\w+)/);\n            }\n            let name = \"\";\n            if (arr && arr.length == 2) {\n                name = arr[1];\n            }\n            classNameMap[obj] = name;\n            return name;\n        }\n    } catch (e) {\n    }\n    return undefined;\n}\n\nexport default {\n    isLayaApp,\n    isConchApp,\n    getVersion,\n    isDebug,\n    setDebug,\n    printError,\n    printDebug,\n    getEnv,\n    setEnv\n}","import { setFocus } from \"../navigator/stack\";\nimport NavLoader from \"../navigator/loader\";\nimport Screen from \"./screen\";\n\nlet _inited = false;\nlet _uiManager: Laya.Sprite;\nlet _mainUILayer: Laya.Sprite;\nlet _topUILayer: Laya.Sprite;\n\nfunction _checkInit() {\n    if (!_inited) {\n        _inited = true;\n        _uiManager = new Laya.Sprite();\n        _uiManager.mouseThrough = true;\n        _uiManager.name = '_tape_stage';\n        _mainUILayer = new Laya.Sprite();\n        _mainUILayer.name = '_tape_main_layer';\n        _mainUILayer.mouseThrough = true;\n        _topUILayer = new Laya.Sprite();\n        _topUILayer.name = '_tape_top_layer';\n        _topUILayer.mouseThrough = true;\n        _uiManager.addChild(_mainUILayer);\n        _uiManager.addChild(_topUILayer);\n        Laya.stage.addChild(_uiManager);\n        Laya.stage.on(Laya.Event.RESIZE, null, () => {\n            _resizeUI();\n        });\n    }\n    _resizeUI();\n}\n\nfunction _resizeUI() {\n    if (_mainUILayer) {\n        _mainUILayer.width = Screen.getDesignWidth();\n        _mainUILayer.height = Screen.getDesignHeight();\n        _mainUILayer.x = Screen.getOffestX();\n        _mainUILayer.y = Screen.getOffestY();\n    }\n    if (_topUILayer) {\n        _topUILayer.width = Screen.getDesignWidth();\n        _topUILayer.height = Screen.getDesignHeight();\n        _topUILayer.x = Screen.getOffestX();\n        _topUILayer.y = Screen.getOffestY();\n    }\n    _uiManager.scaleX = Screen.getScale();\n    _uiManager.scaleY = Screen.getScale();\n}\n\nexport function initUI() {\n    _checkInit();\n}\n\nfunction checkFocus() {\n    if (_mainUILayer.numChildren > 0) {\n        let last = _mainUILayer.getChildAt(_mainUILayer.numChildren - 1);\n        if (last instanceof NavLoader) {\n            setFocus(true);\n            return;\n        }\n    }\n    setFocus(false);\n}\n\nfunction moveTopToMainLayer(view: NavLoader) {\n    _checkInit();\n    if (view && view.parent == _mainUILayer) {\n        _mainUILayer.removeChild(view);\n        _mainUILayer.addChild(view);\n    }\n    checkFocus();\n}\n\nfunction addViewToMainLayer(view) {\n    _checkInit();\n    view && _mainUILayer.addChild(view);\n    checkFocus();\n}\n\nfunction addViewTopLayer(view) {\n    _checkInit();\n    view && _topUILayer.addChild(view);\n    checkFocus();\n}\n\nexport default {\n    checkFocus,\n    moveTopToMainLayer,\n    addViewToMainLayer,\n    addViewTopLayer,\n}","import UILoader from \"./loader\";\nimport UIMgr from \"../manager/uimgr\";\n\nlet _loaders = [];\n\nfunction _all() {\n    return _loaders;\n}\n\nfunction _length() {\n    return _loaders.length;\n}\n\nfunction _getStack(index = 0) {\n    var len = _length();\n    return len > index ? _loaders[len - 1 - index] : null;\n}\n\nfunction _showStack(index = 0, anim = false, callback = null) {\n    let stack = _getStack(index);\n    if (!stack) {\n        return;\n    }\n    stack.show(anim && _length() > 1, callback);\n}\n\nfunction _pushStack(stack) {\n    _loaders.push(stack);\n}\n\nfunction _topStack(stack) {\n    let index = _loaders.indexOf(stack);\n    if (index >= 0) {\n        _loaders.splice(index, 1);\n        _loaders.push(stack);\n        _refreshStack(null);\n        UIMgr.moveTopToMainLayer(stack);\n    }\n}\n\nfunction _refreshStack(callback) {\n    _showStack(0, true, () => {\n        let stack = _getStack(1);\n        if (!stack) {\n            return;\n        }\n        stack.hide();\n        callback && callback();\n    });\n}\n\nfunction _finishStack(stacks) {\n    if (!stacks || stacks.length <= 0) {\n        return;\n    }\n    for (var i = 0; _length() > 1 && i < stacks.length; i++) {\n        var stack = stacks[i];\n        _loaders.splice(_loaders.indexOf(stack), 1);\n        stack.hide();\n        stack.exit();\n    }\n    _showStack(0);\n}\n\nfunction _popStack(count) {\n    if (count >= _length()) {\n        count = _length() - 1;\n    }\n    if (count <= 0) {\n        return;\n    }\n    let pops = _loaders.splice(_length() - count, count);\n    pops.forEach(element => {\n        element.hide();\n        element.exit();\n    });\n    _showStack(0);\n}\n\nexport function setFocus(focus) {\n    let stack = _getStack();\n    if (stack) {\n        stack.focus(focus);\n    }\n}\n\nfunction navigate(page, params = null, action = null, single = false) {\n    if (!params) {\n        params = {};\n    }\n    let open = () => {\n        new UILoader({\n            page,\n            params,\n            onShow: () => {\n                _refreshStack(() => {\n                    action && action(true);\n                });\n            },\n            onLoaded: (loader) => {\n                UIMgr.addViewToMainLayer(loader);\n                _pushStack(loader);\n            },\n            onLoadProgress: (loader, progress) => {\n                var stack = _getStack();\n                stack && stack.nextProgress(progress);\n            }\n        });\n    }\n    if (single || page.single) {\n        var stacks = [];\n        _all().forEach(stack => {\n            if (stack.filter(page)) {\n                stacks.push(stack);\n            }\n        });\n        stacks.length > 0 ? _topStack(stacks.pop()) : open();\n    } else {\n        open();\n    }\n}\n\nfunction popToTop() {\n    _popStack(_length());\n}\n\nfunction pop(number = 1) {\n    _popStack(number)\n}\n\nfunction finish(page, instance = null) {\n    var stacks = [];\n    _all().forEach(stack => {\n        if (stack.filter(page, instance)) {\n            stacks.push(stack);\n        }\n    });\n    _finishStack(stacks);\n}\n\nexport default {\n    navigate,\n    pop,\n    popToTop,\n    finish,\n}","\nlet _inits = [];\nlet _shows = [];\nlet _hides = [];\n\nexport function callHookInit(width: number, height: number, ...options) {\n    _inits.forEach(callback => callback(width, height, ...options));\n}\n\nexport function callHookShow(...args) {\n    _shows.forEach(callback => callback(...args));\n}\n\nexport function callHookHide(...args) {\n    _hides.forEach(callback => callback(...args));\n}\n\nfunction onInit(callback: (width: number, height: number, ...options) => void) {\n    if (callback && typeof callback == \"function\" && _inits.indexOf(callback) < 0) {\n        _inits.push(callback);\n    }\n}\n\nfunction onShow(callback: (...args) => void) {\n    if (callback && typeof callback == \"function\" && _shows.indexOf(callback) < 0) {\n        _shows.push(callback);\n    }\n}\n\nfunction onHide(callback: (...args) => void) {\n    if (callback && typeof callback == \"function\" && _hides.indexOf(callback) < 0) {\n        _hides.push(callback);\n    }\n}\n\nexport default {\n    onInit,\n    onShow,\n    onHide\n}\n","import Screen from \"../manager/screen\";\n\nexport default class ui extends Laya.Component {\n\n    private _bgSprite = null;\n    private _bgAlpha = 0.5;\n    private _bgColor = '#000000';\n    private _isTranslucent = true;\n    private _isShow = false;\n    private _handleOnTouchOutside = null;\n    private _canceledOnTouchOutside = false;\n    private _mask = false;\n    private _onEvent = null;\n\n    constructor(handleOnTouchOutside = null) {\n        super();\n        this._handleOnTouchOutside = handleOnTouchOutside;\n        this._onEvent = (e) => {\n            if (this.isShow && this.canceledOnTouchOutside) {\n                this._handleOnTouchOutside && this._handleOnTouchOutside();\n            }\n            e.stopPropagation();\n        }\n        setTimeout(() => this.initBg(), 0);\n    }\n\n    public set ui(view: Laya.Sprite) {\n        this.removeChildByName('_contentView');\n        view.name = '_contentView';\n        view.mouseThrough = true;\n        this.addChild(view);\n    }\n\n    public get ui(): Laya.Sprite {\n        return this.getChildByName('_contentView') as Laya.Sprite;\n    }\n\n    public set isShow(isShow) {\n        this._isShow = isShow;\n    }\n\n    public get isShow() {\n        return this._isShow;\n    }\n\n    public set bgAlpha(bgAlpha) {\n        this._bgAlpha = bgAlpha;\n        this.refreshBg();\n    }\n\n    public get bgAlpha() {\n        return this._bgAlpha;\n    }\n\n    public set bgColor(bgColor) {\n        this._bgColor = bgColor;\n        this.refreshBg();\n    }\n\n    public get bgColor() {\n        return this._bgColor;\n    }\n\n    public set isTranslucent(isTranslucent) {\n        this._isTranslucent = isTranslucent;\n        this.refreshBg();\n    }\n\n    public get isTranslucent() {\n        return this._isTranslucent;\n    }\n\n    public set canceledOnTouchOutside(canceledOnTouchOutside) {\n        this._canceledOnTouchOutside = canceledOnTouchOutside;\n        this.refreshCanceledOnTouchOutside();\n    }\n\n    public get canceledOnTouchOutside() {\n        return this._canceledOnTouchOutside;\n    }\n\n    public set nonPenetrating(nonPenetrating) {\n        this._mask = nonPenetrating;\n        this.refreshCanceledOnTouchOutside();\n    }\n\n    public get nonPenetrating() {\n        return this._mask;\n    }\n\n    private refreshBg() {\n        if (!this._bgSprite) {\n            return;\n        }\n        this._bgSprite.alpha = this.bgAlpha;\n        this._bgSprite.graphics.clear();\n        if (!this.isTranslucent) {\n            this._bgSprite.graphics.drawRect(0, 0, this._bgSprite.width, this._bgSprite.height, this.bgColor);\n        }\n    }\n\n    private refreshCanceledOnTouchOutside() {\n        this._bgSprite && this._bgSprite.offAll();\n        if ((this.canceledOnTouchOutside || this.nonPenetrating) && this.ui) {\n            this.ui.mouseThrough = true;\n            this._bgSprite && this._bgSprite.on(Laya.Event.CLICK, this, this._onEvent);\n        }\n    }\n\n    private initBg() {\n        if (this._bgSprite) {\n            return;\n        }\n        this._bgSprite = new Laya.Sprite();\n        this._bgSprite.x = -Screen.getOffestX();\n        this._bgSprite.y = -Screen.getOffestY();\n        this._bgSprite.width = Screen.getWidth();\n        this._bgSprite.height = Screen.getHeight();\n        this.addChildAt(this._bgSprite, 0);\n        this.refreshBg();\n        this.refreshCanceledOnTouchOutside();\n    }\n\n}","\nimport Screen from \"./screen\";\n\nlet _bgSprite: Laya.Sprite = null;\nlet _bgImage: Laya.Image = null;\nlet _bgSkin = null;\nlet _bgSizeGrid = null;\nlet _inited = false;\n\nfunction _checkInit() {\n    if (!_inited) {\n        _inited = true;\n        _bgSprite = new Laya.Sprite;\n        _bgSprite.name = '_tape_bg_layer';\n        _bgImage = new Laya.Image;\n        _bgImage.name = '_bg_image';\n        Laya.stage.addChild(_bgSprite);\n        Laya.stage.addChild(_bgImage);\n        Laya.stage.on(Laya.Event.RESIZE, null, () => {\n            _resizeBg();\n        });\n    }\n    _resizeBg();\n}\n\n\nfunction _drawSkin() {\n    if (_bgImage) {\n        if (_bgSkin) {\n            _bgImage.skin = _bgSkin;\n        }\n        if (_bgSizeGrid) {\n            _bgImage.sizeGrid = _bgSizeGrid;\n        } else {\n            _bgImage.sizeGrid = '';\n        }\n    }\n}\n\nfunction _resizeBg() {\n    if (_bgSprite) {\n        _bgSprite.width = Screen.getWidth();\n        _bgSprite.height = Screen.getHeight();\n    }\n    if (_bgImage) {\n        _bgImage.width = Screen.getWidth();\n        _bgImage.height = Screen.getHeight();\n    }\n}\n\nexport function initBg() {\n    _checkInit();\n    _drawSkin();\n}\n\nfunction setBgColor(color) {\n    if (!_bgSprite) {\n        return;\n    }\n    _bgSprite.graphics.clear();\n    _bgSprite.graphics.drawRect(0, 0, _bgSprite.width, _bgSprite.height, color);\n}\n\nfunction setBgSkin(url, sizeGrid = null) {\n    _bgSkin = url;\n    _bgSizeGrid = sizeGrid;\n    _drawSkin();\n}\n\nfunction setBgTexture(url) {\n    if (!_bgSprite) {\n        return;\n    }\n    _bgSprite.graphics.clear();\n    Laya.loader.load(url, Laya.Handler.create(this, (texture) => {\n        try {\n            _bgSprite.graphics.fillTexture(texture, 0, 0, _bgSprite.width, _bgSprite.height, 'repeat');\n        } catch (error) {\n        }\n    }));\n}\n\nfunction getBgSprite() {\n    return _bgSprite;\n}\n\nexport default {\n    setBgSkin,\n    setBgColor,\n    setBgTexture,\n    getBgSprite,\n}","import UIMgr from \"../manager/uimgr\";\nimport Activity from \"../display/activity\";\nimport env, { getClassName } from \"../env\";\nimport { onNavigatorReady } from \"./init\";\n\nlet _indexID = 1;\n\nfunction genID(obj) {\n    let name = getClassName(obj) || \"Activity\"\n    return `${name}$${_indexID++}`;\n}\n\nexport default class extends Laya.Component {\n\n    private _options = null;\n    private _activity: Activity = null;\n    private _isShow = false;\n    private _isFocus = false;\n    private _pageName = \"\";\n\n    constructor(options) {\n        super();\n        this.visible = false;\n        this._options = options;\n        this._pageName = genID(this._options.page);\n        env.printDebug(\"init\", this._getPageName());\n        let res = this._options.page.res;\n        if (res && res.length > 0) {\n            Laya.loader.load(res, Laya.Handler.create(this, () => {\n                this._newActivity();\n                setTimeout(() => { this._onLoaded(); }, 100);\n                env.printDebug(\"onLoaded\", this._getPageName());\n            }), Laya.Handler.create(this, (progress) => {\n                env.printDebug(\"onLoadProgress\", this._getPageName(), progress);\n                this._onLoadProgress(progress);\n            }, null, false));\n        } else {\n            this._newActivity();\n            this._onLoaded();\n            env.printDebug(\"onLoaded\", this._getPageName());\n            env.printDebug(\"onLoadProgress\", this._getPageName(), 1);\n        }\n    }\n\n    _getPageName() {\n        return this._pageName;\n    }\n\n    _newActivity() {\n        if (this._activity) {\n            return;\n        }\n        this._activity = new this._options.page({\n            page: this._options.page,\n            params: this._options.params\n        });\n        this._activity[\"_ID\"] = this._pageName;\n        env.printDebug(\"newActivity\", this._getPageName());\n    }\n\n    _onLoaded() {\n        onNavigatorReady().then(() => {\n            this._options.onLoaded && this._options.onLoaded(this);\n            this.addChild(this._activity);\n            env.printDebug(\"onCreate\", this._getPageName());\n            this._activity.onCreate && this._activity.onCreate();\n            this._options.onShow && this._options.onShow();\n        });\n    }\n\n    _onLoadProgress(progress) {\n        this._options.onLoadProgress && this._options.onLoadProgress(this, progress);\n    }\n\n    nextProgress(progress) {\n        this._activity.onNextProgress && this._activity.onNextProgress(progress);\n    }\n\n    filter(page, activity) {\n        if (page === this._options.page) {\n            return !activity || activity === this._activity;\n        }\n        return false;\n    }\n\n    show(anim, callback) {\n        if (this.visible) {\n            return;\n        }\n        if (this._isShow) {\n            return;\n        }\n        this._isShow = true;\n        var easeIn = this._activity.easeIn || Laya.Ease.linearIn;\n        var duration = this._activity.duration || 0;\n        var fromProps = this._activity.fromProps || {};\n        var toProps = this._activity.toProps || {};\n        if (anim && easeIn && duration > 0) {\n            Object.assign(this, fromProps);\n            env.printDebug(\"onResume\", this._getPageName());\n            this._activity.onResume && this._activity.onResume();\n            this.visible = true;\n            Laya.Tween.to(this, toProps, duration, easeIn, Laya.Handler.create(this, () => {\n                callback && callback();\n            }));\n        } else {\n            env.printDebug(\"onResume\", this._getPageName());\n            this._activity.onResume && this._activity.onResume();\n            this.visible = true;\n            callback && callback();\n        }\n        UIMgr.checkFocus();\n    }\n\n    hide() {\n        if (!this.visible) {\n            return;\n        }\n        if (!this._isShow) {\n            return;\n        }\n        this._isShow = false;\n        env.printDebug(\"onPause\", this._getPageName());\n        this._activity.onPause && this._activity.onPause();\n        this.visible = false;\n        this.focus(false);\n    }\n\n    exit() {\n        env.printDebug(\"onDestroy\", this._getPageName());\n        this._activity.onDestroy && this._activity.onDestroy();\n        this.destroy();\n    }\n\n    focus(focus) {\n        if (this._isFocus === focus) {\n            return;\n        }\n        this._isFocus = focus;\n        env.printDebug(\"onFocus\", this._getPageName(), focus);\n        this._activity.onFocus && this._activity.onFocus(focus);\n    }\n\n}","import NavStack from \"./stack\";\n\nlet _options = null;\nlet _inited = false;\nlet _isReady = false;\nlet _readyResolve = null;\nlet _readyPromise: Promise<any> = new Promise((resolve) => {\n    _readyResolve = resolve;\n});\n\nfunction _enableResourceVersion() {\n    if (_options && _options.fileVersion) {\n        Laya.ResourceVersion.type = Laya.ResourceVersion.FILENAME_VERSION;\n        Laya.ResourceVersion.enable(_options.fileVersion, Laya.Handler.create(null, () => {\n            _beginLoadStaticRes();\n        }))\n    } else {\n        _beginLoadStaticRes();\n    }\n}\n\nfunction _beginLoadStaticRes() {\n    let res = _options.commonRes || [];\n    if (res.length > 0) {\n        Laya.loader.load(res, Laya.Handler.create(null, () => {\n            _onStaticResLoaded();\n            _options.onLoaded && _options.onLoaded();\n        }), Laya.Handler.create(this, (progress) => {\n            _options.onLoadProgress && _options.onLoadProgress(progress);\n        }, null, false));\n    } else {\n        _options.onLoadProgress && _options.onLoadProgress(100);\n        _options.onLoaded && _options.onLoaded();\n        _onStaticResLoaded();\n    }\n}\n\nfunction _onStaticResLoaded() {\n    _options.mainPage && NavStack.navigate(_options.mainPage);\n}\n\nexport function initNavigator(options) {\n    if (!options || _inited) {\n        return;\n    }\n    _options = options;\n    _enableResourceVersion();\n    _inited = true;\n}\n\nexport function onNavigatorReady(): Promise<any> {\n    if (_isReady) {\n        return Promise.resolve();\n    }\n    return _readyPromise;\n}\n\nexport function setNavigatorReady(): void {\n    if (_isReady) {\n        return;\n    }\n    _isReady = true;\n    _readyResolve();\n    _readyResolve = null;\n    _readyPromise = null;\n}","import { onload } from \"../utils/onload\";\n\nfunction _loadJS(jspath, options, callback) {\n    try {\n        var _protocol = location.protocol != 'file:' ? location.protocol : 'http:';\n        var _script = document.createElement(\"script\");\n        Object.keys(options).forEach(key => {\n            _script.setAttribute(key, options[key])\n        });\n        _script.type = \"text/javascript\";\n        if (jspath.indexOf('//') == 0) {\n            _script.src = _protocol + jspath;\n        } else {\n            _script.src = jspath;\n        }\n        document.body.appendChild(_script);\n        _script.onerror = function (err) {\n            callback && callback(_script, err);\n        }\n        _script.onload = function () {\n            callback && callback(_script, null);\n        }\n    } catch (error) {\n        callback && callback(undefined, error);\n    }\n}\n\nfunction loadJs(jspath, options = {}) {\n    return onload().then(() => {\n        return new Promise((resolve) => {\n            if (!jspath) {\n                return resolve && resolve(undefined);\n            }\n            var index = 0;\n            var jsList = jspath.split(',');\n            var nodeList = [];\n            jsList.forEach(function (js) {\n                _loadJS(js, options, function (node, err) {\n                    nodeList[index] = { node, err };\n                    index++;\n                    if (index == jsList.length) {\n                        resolve && resolve(nodeList);\n                    }\n                })\n            });\n        })\n    });\n}\n\nexport default {\n    loadJs\n}","let _ready = null;\n\nexport function onload() {\n    if (!_ready) {\n        _ready = new Promise((reslove, reject) => {\n            let _timer;\n            let _pollingDocument = function () {\n                if (!!document && document.readyState == 'complete') {\n                    _timer && clearTimeout(_timer);\n                    reslove(Date.now());\n                } else {\n                    _timer = setTimeout(_pollingDocument, 1);\n                }\n            };\n            _timer = setTimeout(_pollingDocument, 1);\n        });\n    }\n    return _ready;\n}","import env from \"./env\";\n\nlet _pipeline_map = {};\n\nfunction _check(type) {\n    if (_pipeline_map[type]) {\n        let pipe = _pipeline_map[type];\n        if (pipe.funcs.length <= 0) {\n            return;\n        }\n        if (pipe.padding) {\n            setTimeout(() => {\n                _check(type);\n            }, 500);\n            return;\n        }\n        let func = pipe.funcs.shift();\n        func && func();\n        pipe.padding = true;\n        _check(type);\n    }\n}\n\nfunction put(type, func) {\n    if (type && typeof func === \"function\") {\n        env.printDebug(\"put pipe to : \", type);\n        if (_pipeline_map[type]) {\n            _pipeline_map[type].funcs.push(func);\n        } else {\n            _pipeline_map[type] = { padding: false, funcs: [func] }\n        }\n        _check(type);\n    }\n}\n\nfunction next(type) {\n    if (_pipeline_map[type]) {\n        env.printDebug(\"next pipe as : \", type);\n        _pipeline_map[type].padding = false;\n        _check(type);\n    }\n}\n\nexport default {\n    put,\n    next,\n}","function _toNumber_(value) {\n    try {\n        return JSON.parse(value);\n    } catch (ex) {\n        return parseFloat(value);\n    }\n}\n\nfunction _toBoolean_(value) {\n    return !!value && value != 'false' && value != '0';\n}\n\nfunction _toString_(value, def) {\n    try {\n        let type = typeof value;\n        if (type === 'string') {\n            return value;\n        } else if (type === 'boolean') {\n            return value ? 'true' : 'false';\n        } else if (type === 'number') {\n            return `${value}`;\n        } else if (type === 'object') {\n            return JSON.stringify(value);\n        }\n    } catch (ex) {\n    }\n    return def;\n}\n\nfunction _toObject_(value, def) {\n    if (typeof value === 'object') {\n        return value;\n    }\n    try {\n        return JSON.parse(value);\n    } catch (ex) {\n    }\n    return def;\n}\n\nfunction _inferType(value) {\n    if (typeof value !== 'string') {\n        return typeof value;\n    }\n    try {\n        const parsed = JSON.parse(value);\n        return typeof parsed;\n    } catch (ex) {\n        // might be a pure number\n        const number = parseFloat(value);\n        if (!isNaN(number) && `${number}` === value) {\n            return 'number';\n        }\n        return 'string';\n    }\n}\n\nexport function toAny(value, def) {\n    if (value === undefined || value === null) {\n        return def;\n    }\n    // try to infer type and return\n    let type = _inferType(value);\n    if (def !== undefined && def !== null) {\n        type = typeof def;\n    }\n    switch (type) {\n        case 'number':\n            return _toNumber_(value);\n        case 'boolean':\n            return _toBoolean_(value);\n        case 'object':\n            return _toObject_(value, def);\n        case 'string':\n            return _toString_(value, def);\n        default:\n            break;\n    }\n    return def;\n}","import { getClassName } from \"../env\";\nimport UIMgr from \"../manager/uimgr\";\n\nlet _popups = {};\nlet _fromProps = { alpha: 0 }\nlet _toProps = { alpha: 1 }\nlet _exitProps = { alpha: 0 }\n\nfunction _showPopupAnim(popupView, cb) {\n    let from = popupView.fromProps || _fromProps || {};\n    let to = popupView.toProps || _toProps || {};\n    let easeIn = popupView.easeIn || Laya.Ease.linearIn;\n    let duration = popupView.duration || 500;\n    Object.assign(popupView, from);\n    Laya.Tween.to(popupView, to, duration, easeIn, Laya.Handler.create(this, () => {\n        cb && cb(popupView);\n    }));\n}\n\nfunction _hidePopupAnim(popupView, cb) {\n    let from = popupView.toProps || _toProps || {};\n    let to = popupView.exitProps || _exitProps || {};\n    let easeOut = popupView.easeOut || Laya.Ease.linearOut;\n    let duration = popupView.duration || 500;\n    Object.assign(popupView, from);\n    Laya.Tween.to(popupView, to, duration, easeOut, Laya.Handler.create(this, () => {\n        cb && cb(popupView);\n    }));\n}\n\nfunction _hidePopup(view, result) {\n    _hidePopupAnim(view, () => {\n        view._onHide && view._onHide(view.popup, result);\n        view.isShow = false;\n        view.onHide && view.onHide(view.popup, result);\n        view.removeSelf && view.removeSelf();\n        view.destroy && view.destroy();\n        UIMgr.checkFocus();\n    });\n}\n\nfunction _showPopup(view) {\n    _showPopupAnim(view, () => {\n        view.isShow = true;\n    });\n}\n\nfunction setDefaultAnim(fromProps, toProps) {\n    _fromProps = fromProps;\n    _toProps = toProps;\n}\n\nfunction showPopup(popup, params = null, onHide = null, alias = \"default\") {\n    var mapKey = `${alias}_${getClassName(popup)}`;\n    let views = _popups[mapKey];\n    let view = new popup();\n    view.alias = alias;\n    view.popup = popup;\n    view.params = params || {};\n    view._onHide = onHide;\n    if (views) {\n        views.push(view);\n    } else {\n        _popups[mapKey] = [view];\n    }\n    UIMgr.addViewToMainLayer(view);\n    view.onShow && view.onShow();\n    _showPopup(view);\n}\n\nfunction hidePopup(popup, view = null, result = null, alias = \"default\") {\n    var mapKey = `${alias}_${getClassName(popup)}`;\n    var views = _popups[mapKey];\n    if (view) {\n        let index = views ? views.indexOf(view) : -1;\n        if (index < 0) {\n            return;\n        }\n        views.splice(index, 1);\n        _hidePopup(view, result);\n    } else {\n        views && views.splice(0, views.length).forEach(v => {\n            _hidePopup(v, result);\n        });\n    }\n}\n\nexport default {\n    setDefaultAnim,\n    showPopup,\n    hidePopup\n}","import UIMgr from \"../manager/uimgr\";\n\nlet _toasts: { [key: string]: any[] } = {};\n\nfunction _pushToast(toast, view) {\n    if (_toasts[toast]) {\n        _toasts[toast].push(view);\n    } else {\n        _toasts[toast] = [view];\n    }\n}\n\nfunction _popToast(toast, view) {\n    if (!_toasts[toast]) {\n        return [];\n    }\n    if (view && _toasts[toast].length > 1) {\n        _toasts[toast].splice(_toasts[toast].indexOf(view), 1);\n        return [view];\n    } else {\n        let views = _toasts[toast] || [];\n        delete _toasts[toast];\n        return views;\n    }\n}\n\nfunction showToast(toast, params = null, onHide = null) {\n    var view = new toast;\n    view._on_hide = onHide;\n    view.toast = toast;\n    view.params = params || {};\n    view.onShow && view.onShow();\n    let from = view.fromProps || { alpha: 0 };\n    let to = view.toProps || { alpha: 1 };\n    let exit = view.exitProps || { alpha: 0 };\n    let easeIn = view.easeIn || Laya.Ease.linearIn;\n    let easeOut = view.easeOut || Laya.Ease.linearOut;\n    let duration = view.duration;\n    let displayDuration = view.displayDuration;\n    Object.assign(view, from);\n    Laya.Tween.to(view, to, duration, easeIn, Laya.Handler.create(this, () => {\n        view.isShow = true;\n    }), 0);\n    if (displayDuration != -1) {\n        Laya.Tween.to(view, exit, duration, easeOut, Laya.Handler.create(this, () => {\n            if (view) {\n                _popToast(toast, view);\n                view._on_hide && view._on_hide(view.toast);\n                view.isShow = false;\n                view.onHide && view.onHide();\n                view.destroy();\n            }\n        }), displayDuration + duration);\n    }\n    _pushToast(toast, view);\n    UIMgr.addViewTopLayer(view);\n}\n\nfunction hideToast(toast, view = null) {\n    let list = _popToast(toast, view);\n    list.forEach(view => {\n        view._on_hide && view._on_hide(view.toast);\n        view.isShow = false;\n        view.onHide && view.onHide();\n        view.destroy();\n    });\n}\n\nexport default {\n    showToast,\n    hideToast,\n}","import \"./adapter\";\nimport \"./polyfill\";\nimport bg from \"./services/manager/bg\";\nimport eft from \"./services/manager/eft\";\nimport screen from \"./services/manager/screen\";\nimport audio from './services/audio';\nimport env from \"./services/env\";\nimport js from \"./services/js\";\nimport event from \"./services/event\";\nimport pipeline from \"./services/pipeline\";\nimport runtime from \"./services/runtime\";\nimport message from \"./services/message\";\nimport utils from './services/utils';\nimport navigator from \"./services/navigator/stack\";\nimport popup from \"./services/display/popupmanager\";\nimport toast from \"./services/display/toastmanager\";\nimport Activity from \"./services/display/activity\";\nimport PopupView from \"./services/display/popupview\";\nimport ToastView from \"./services/display/toastview\";\nimport lifecycle from \"./services/lifecycle\";\nimport { getQueryString } from \"./utils/query\";\nimport { init, init3D, start } from './services/init';\n\nconst OHOGame = Object.assign({}, lifecycle, {\n    init,\n    init3D,\n    start,\n    getQueryString,\n    env,\n    js,\n    bg,\n    eft,\n    screen,\n    audio,\n    event,\n    runtime,\n    pipeline,\n    navigator,\n    utils,\n    popup,\n    toast,\n    message,\n    Activity,\n    PopupView,\n    ToastView,\n});\n\nif (typeof window !== \"undefined\") {\n    (window as any).OHOGame = OHOGame;\n}\n\nexport = {\n    OHOGame\n}\n","import \"./_transsion\";","import hook from '../services/hook';\n\n// loader\nif (Laya && Laya.Loader) {\n  var Handler = Laya.Handler;\n  var Loader: any = Laya.Loader;\n  var HttpRequest = Laya.HttpRequest;\n  var __proto = Loader.prototype;\n  __proto.load = function (url, type, cache, group, ignoreCache) {\n    (cache === void 0) && (cache = true);\n    (ignoreCache === void 0) && (ignoreCache = false);\n    this._url = url;\n    if (url.indexOf(\"data:image\") === 0) this._type = type = \"image\";\n    else {\n      this._type = type || (type = this.getTypeFromUrl(url));\n      url = Laya.URL.formatURL(url);\n    }\n    this._cache = cache;\n    this._data = null;\n    if (!ignoreCache && Loader.loadedMap[url]) {\n      this._data = Loader.loadedMap[url];\n      this.event(/*laya.events.Event.PROGRESS*/\"progress\", 1);\n      this.event(/*laya.events.Event.COMPLETE*/\"complete\", this._data);\n      return;\n    }\n    if (group) Loader.setGroup(url, group);\n    if (Loader.parserMap[type] != null) {\n      this._customParse = true;\n      if (((Loader.parserMap[type]) instanceof Handler)) Loader.parserMap[type].runWith(this);\n      else Loader.parserMap[type].call(null, this);\n      return;\n    }\n    if (type === \"image\" || type === \"htmlimage\" || type === \"nativeimage\") return this._loadImage(url);\n    if (type === \"sound\") return this._loadSound(url);\n    if (type === \"ttf\") return this._loadTTF(url);\n    try {\n      // 在这里，插入添加适配读取本地资源\n      if (typeof loadRuntime !== 'undefined' && !url.startsWith(\"http\")) {\n        var that = this;\n        setTimeout(function () {\n          if (url.startsWith('file://')) {\n            url = url.substr('file://'.length);\n          }\n          var response;\n          if (type == 'pkm' || type === \"arraybuffer\") {\n            response = rt.getFileSystemManager().readFileSync(url);\n          } else {\n            response = rt.getFileSystemManager().readFileSync(url, \"utf8\");\n            if ((type == 'atlas' || type == 'json') && typeof response !== \"undefined\") {\n              response = JSON.parse(response);\n            }\n          }\n          that.onLoaded(response);\n        }, 0);\n        return;//这里记得 return\n      }\n    } catch (error) {\n    }\n    // 添加适配代码结束，下面是原本 laya 代码\n    var contentType;\n    switch (type) {\n      case \"atlas\":\n      case \"plf\":\n        contentType = \"json\";\n        break;\n      case \"font\":\n        contentType = \"xml\";\n        break;\n      case \"pkm\":\n        contentType = \"arraybuffer\";\n        break\n      default:\n        contentType = type;\n    }\n    if (Loader.preLoadedMap[url]) {\n      this.onLoaded(Loader.preLoadedMap[url]);\n    } else {\n      if (!this._http) {\n        this._http = new HttpRequest();\n        this._http.on(/*laya.events.Event.PROGRESS*/\"progress\", this, this.onProgress);\n        this._http.on(/*laya.events.Event.ERROR*/\"error\", this, this.onError);\n        this._http.on(/*laya.events.Event.COMPLETE*/\"complete\", this, this.onLoaded);\n      }\n      this._http.send(url, null, \"get\", contentType);\n    }\n  }\n}\n\n// ui\nhook.onInit((width, height) => {\n  if (typeof window !== \"undefined\" && typeof window['getAdapterInfo'] !== \"undefined\") {\n    var stage = Laya.stage;\n    var info = window['getAdapterInfo']({ width, height, scaleMode: Laya.stage.scaleMode });\n    stage.width = info.rw;\n    stage.height = info.rh;\n  }\n})\n","if (typeof Object.assign != 'function') {\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.defineProperty(Object, \"assign\", {\n    value: function assign(target, varArgs) { // .length of function is 2\n      'use strict';\n      if (target == null) { // TypeError if undefined or null\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      var to = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n\n        if (nextSource != null) { // Skip over if undefined or null\n          for (var nextKey in nextSource) {\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    },\n    writable: true,\n    configurable: true\n  });\n}","let _dic: Laya.Dictionary = new Laya.Dictionary();\nlet _mcpool: Laya.Dictionary = new Laya.Dictionary();\nlet _inst = {};\n\nfunction onLoadComplet(path, mc, play, loop, loadComplet, thisRef) {\n    var arr = _dic[path].arr;\n    for (var i = 0; i < arr.length; i++) {\n        arr[i][0][\"_url\"] = path;\n        arr[i][0][\"_atlasPath\"] = path.split(\".swf\")[0] + \".json\";\n        arr[i][0][\"_onLoaded\"]();\n        if (arr[i][1])\n            arr[i][0].play(0, arr[i][2]);\n        else\n            arr[i][0].stop();\n        if (arr[i][3]) {\n            arr[i][3].apply(arr[i][4], [arr[i][0]]);\n        }\n    }\n    if (play) {\n        mc.play(0, loop);\n    } else {\n        mc.stop();\n    }\n    if (loadComplet) {\n        loadComplet.apply(thisRef, [mc]);\n    }\n    _dic[path].arr = [];\n    mc.off(Laya.Event.LOADED, _inst, onLoadComplet);\n    _dic[path].load = true;\n}\n\nfunction remove(mc: Laya.MovieClip) {\n    if (!mc) {\n        return;\n    }\n    mc.scaleX = mc.scaleY = 1;\n    mc.pivotX = mc.pivotY = 0;\n    mc[\"anchorX\"] = mc[\"anchorY\"] = 0;\n    mc.alpha = 1;\n    Laya.Tween.clearAll(mc);\n    mc.stop();\n    if (mc.parent)\n        mc.parent.removeChild(mc);\n    _mcpool[mc[\"path\"]].push(mc);\n}\n\nfunction create(path: string, play: boolean = true, loop: boolean = true, loadComplet: Function = null, thisRef = null): Laya.MovieClip {\n    var mc: Laya.MovieClip;\n    if (!_mcpool[path])\n        _mcpool[path] = [];\n    if (_mcpool[path].length > 0) {\n        mc = _mcpool[path].shift();\n    } else {\n        mc = new Laya.MovieClip();\n    }\n    mc[\"path\"] = path;\n    if (_dic[path]) {\n        if (_dic[path].load) {\n            mc[\"_url\"] = path;\n            mc[\"_atlasPath\"] = path.split(\".swf\")[0] + \".json\";\n            mc[\"_onLoaded\"]();\n            if (play)\n                mc.play(0, loop);\n            else\n                mc.stop();\n            if (loadComplet)\n                loadComplet.apply(thisRef, [mc]);\n        } else {\n            _dic[path].arr.push([mc, play, loop, loadComplet, thisRef]);\n        }\n    } else {\n        _dic[path] = { load: false, arr: [] };\n        mc.on(Laya.Event.LOADED, _inst, onLoadComplet, [path, mc, play, loop, loadComplet, thisRef]);\n        mc.load(path, true);\n    }\n    return mc;\n}\n\nexport default {\n    create,\n    remove\n}","import env from \"./env\";\nimport loop from \"../utils/looper\";\n\nfunction fixWechatAudioPlay(callback: Function) {\n    if (window && window['WeixinJSBridge']) {\n        try {\n            window['WeixinJSBridge'].invoke(\"getNetworkType\", {}, () => {\n                callback && callback();\n            });\n        } catch (e) {\n            callback && callback();\n        }\n    } else {\n        callback && callback();\n    }\n}\n\nfunction fixAudioExtension(targetUrl, replaceExt) {\n    let ext = Laya.Utils.getFileExtension(targetUrl);\n    let searchExt = !!ext ? `.${ext}` : '';\n    if (env.isConchApp() && searchExt != \".wav\" && searchExt != \".ogg\") {\n        return targetUrl.substr(0, targetUrl.length - searchExt.length) + replaceExt;\n    }\n    return targetUrl;\n}\n\nclass AudioController {\n\n    private _auidoUrl = '';\n    private _chancel: Laya.SoundChannel = null;\n    private _playing = false;\n    private _onPlay = null;\n    private _onPause = null;\n    private _onStop = null;\n    private _onError = null;\n    private _onProgress = null;\n    private _onComplete = null;\n    private _position = -1;\n    private _duration = -1;\n    private _paused = false;\n    private _type = 'sound';\n    private _playTime = 0;\n\n    constructor(type) {\n        this._type = type;\n    }\n\n    private _update() {\n        if (this._chancel) {\n            this._position = this._chancel.position;\n            this._duration = this._chancel.duration;\n            if (!this._playing && this._position > 0) {\n                this._playing = true;\n                this._onPlay && this._onPlay();\n            }\n            if (this._playing && this._duration > 0) {\n                this._onProgress && this._onProgress({\n                    position: this.position,\n                    duration: this.duration,\n                });\n            } else if (Date.now() - this._playTime > 2000) {\n                this._onError && this._onError();\n                this.stop();\n            }\n        }\n    }\n\n    public onPlay(callback) {\n        this._onPlay = callback;\n    }\n\n    public onStop(callback) {\n        this._onStop = callback;\n    }\n\n    public onPause(callback) {\n        this._onPause = callback;\n    }\n\n    public onProgress(callback) {\n        this._onProgress = callback;\n    }\n\n    public onComplete(callback) {\n        this._onComplete = callback;\n    }\n\n    public onError(callback) {\n        this._onError = callback;\n    }\n\n    public set url(url) {\n        if (this._auidoUrl != url) {\n            this._auidoUrl = url;\n            this.stop();\n        }\n    }\n\n    public get url() {\n        return this._auidoUrl;\n    }\n\n    public get type() {\n        return this._type;\n    }\n\n    public get position() {\n        return this._position;\n    }\n\n    public get duration() {\n        return this._duration;\n    }\n\n    public isPaused() {\n        return this._paused;\n    }\n\n    public isPlaying() {\n        return this._playing;\n    }\n\n    public play(loops: number = 1) {\n        fixWechatAudioPlay(() => {\n            if (this._auidoUrl) {\n                this.stop();\n                let playUrl = fixAudioExtension(this._auidoUrl, '.ogg');\n                this._playTime = Date.now();\n                this._chancel = Laya.SoundManager.playSound(playUrl, loops, Laya.Handler.create(this, () => {\n                    this._onComplete && this._onComplete();\n                    this.stop();\n                }), null, 0);\n                loop.loop(this, this._update);\n            }\n        });\n    }\n\n    public pause() {\n        if (this._chancel && this._playing) {\n            this._onPause && this._onPause();\n            this._chancel.pause();\n            this._paused = true;\n            this._playing = false;\n            loop.clear(this, this._update);\n        }\n    }\n\n    public resume() {\n        if (this._chancel && this._paused) {\n            this._paused = false;\n            this._chancel.resume();\n            loop.loop(this, this._update);\n        }\n    }\n\n    public stop() {\n        if (this._chancel) {\n            this._onStop && this._onStop();\n            this._chancel.stop();\n            this._chancel = null;\n            this._paused = false;\n            this._playing = false;\n            Laya.SoundManager.removeChannel(this._chancel);\n            Laya.SoundManager.destroySound(this._auidoUrl);\n            loop.clear(this, this._update);\n        }\n    }\n\n    public destroy() {\n        this.stop();\n        this._onComplete = null;\n        this._onProgress = null;\n        this._onPlay = null;\n        this._onStop = null;\n        this._onPause = null;\n    }\n\n}\n\nlet _musicAudio = new AudioController('music')\n\nfunction playMusic(url: string, loops: number = 1) {\n    _musicAudio.url = url;\n    _musicAudio.play(loops);\n    return _musicAudio;\n}\n\nfunction playSound(url: string, loops: number = 1) {\n    let audio = new AudioController('sound');\n    audio.url = url;\n    audio.play(loops);\n    return audio;\n}\n\nfunction stopMusic() {\n    _musicAudio.stop();\n}\n\nfunction stopAll() {\n    Laya.SoundManager.stopAll();\n}\n\nfunction stopAllSound() {\n    Laya.SoundManager.stopAllSound();\n}\n\nexport default {\n    playMusic,\n    playSound,\n    stopAll,\n    stopMusic,\n    stopAllSound,\n}","function removeItemForWhere(array, where) {\n    if (typeof where === 'function') {\n        let removeIndexArray = []\n        array.forEach((value, index) => {\n            if (where(value)) {\n                removeIndexArray.push(index)\n            }\n        })\n        removeIndexArray.reverse()\n        removeIndexArray.forEach(index => {\n            array.splice(index, 1);\n        })\n    }\n}\n\nclass Looper {\n\n    private _tasks = [];\n    private _hasLoop = false;\n\n    private _checkLoop() {\n        if (this._tasks.length > 0) {\n            if (!this._hasLoop) {\n                Laya.timer.frameLoop(1, this, () => {\n                    this._tasks.forEach(task => {\n                        let { caller, callback } = task;\n                        callback.apply(caller);\n                    });\n                });\n                this._hasLoop = true;\n            }\n        } else {\n            if (this._hasLoop) {\n                Laya.timer.clearAll(this);\n                this._hasLoop = false;\n            }\n        }\n    }\n\n    public loop(caller: Object, callback: () => void) {\n        let filterTasks = this._tasks.filter((task) => {\n            return task.caller == caller && task.callback == callback;\n        })\n        if (filterTasks.length == 0) {\n            this._tasks.push({\n                caller,\n                callback,\n            });\n            this._checkLoop();\n        }\n    }\n\n    public clear(caller: Object, callback: () => void) {\n        removeItemForWhere(this._tasks, (task) => {\n            return task.caller == caller && (!callback || task.callback == callback);\n        });\n        this._checkLoop();\n    }\n\n}\n\nexport default new Looper;","class Event extends Laya.EventDispatcher {\n\n    private _dic: Laya.Dictionary;\n\n    constructor() {\n        super();\n        this._dic = new Laya.Dictionary();\n    }\n\n    public registeredEvent(type: any, fun: Function, thisRef: any, index: number = 1): void {\n        var arr: Array<any> = [];\n        if (index == null) index = 1;\n        if (this._dic[type]) {\n            arr = this._dic[type];\n            for (var i = 0; i < arr.length; i++) {\n                if (arr[i].fun == fun && arr[i].thisRef == thisRef) {\n                    if (index != arr[i].index) {\n                        arr[i].index = index;\n                        arr.sort(function (a, b) { return b.index - a.index });\n                        this._dic[type] = arr;\n                    }\n                    return\n                }\n            }\n        }\n        arr.push({ fun: fun, thisRef: thisRef, index: index });\n        arr.sort(function (a, b) { return b.index - a.index });\n        this._dic[type] = arr;\n    }\n\n    public removeEvent(type: any, fun: Function, thisRef: any): void {\n        if (this._dic[type]) {\n            var arr = this._dic[type];\n            for (var i = 0; i < arr.length; i++) {\n                if (arr[i].fun == fun && arr[i].thisRef == thisRef) {\n                    arr[i] = null;\n                    arr.splice(i, 1);\n                    this._dic[type] = arr;\n                    return\n                }\n            }\n        }\n    }\n\n    public sendEvent(type: any, args: Array<any> = null): void {\n        if (this._dic[type]) {\n            var arr = this._dic[type];\n            for (var i = 0; i < arr.length; i++) {\n                arr[i].fun.apply(arr[i].thisRef, args);\n            }\n        }\n    }\n\n}\n\nexport default new Event();","module runtime {\n\n    export let clickSound = null;\n    export let scaleTime: number = 100;\n    export let scaleSmallValue: number = 0.8;\n    export let scaleBigValue: number = 1;\n\n    function pivotCenter(view) {\n        view.x = view.x + view.width / 2 - view.pivotX;\n        view.y = view.y + view.height / 2 - view.pivotY;\n        view.pivot(view.width / 2, view.height / 2);\n    }\n\n    function viewScale(view, scale) {\n        pivotCenter(view);\n        Laya.Tween.to(view, { scaleX: scale, scaleY: scale }, scaleTime);\n    }\n\n    function playClickSound(sound) {\n        if (sound) {\n            sound != 'none' && Laya.SoundManager.playSound(sound, 1);\n        } else if (clickSound) {\n            clickSound != 'none' && Laya.SoundManager.playSound(clickSound, 1);\n        }\n    }\n\n    export function bindClick(view, onClick?, onDown?, onUp?, onOut?) {\n        view.offAll();\n        view.on(Laya.Event.CLICK, view, () => {\n            onClick && onClick();\n            playClickSound(view.sound);\n        });\n        view.on(Laya.Event.MOUSE_DOWN, view, () => {\n            onDown && onDown();\n            viewScale(view, scaleSmallValue);\n        });\n        view.on(Laya.Event.MOUSE_UP, view, () => {\n            onUp && onUp();\n            viewScale(view, scaleBigValue);\n        });\n        view.on(Laya.Event.MOUSE_OUT, view, () => {\n            onOut && onOut();\n            viewScale(view, scaleBigValue);\n        });\n    }\n\n    export class btn extends Laya.Button {\n\n        public sound = null;\n\n        constructor() {\n            super();\n            bindClick(this);\n        }\n\n    }\n\n    export class btn_img extends Laya.Image {\n\n        public sound = null;\n\n        constructor() {\n            super();\n            bindClick(this);\n        }\n\n    }\n\n    export class btn_label extends Laya.Label {\n\n        public sound = null;\n        constructor() {\n            super();\n            bindClick(this);\n        }\n\n    }\n\n    export class btn_sprite extends Laya.Sprite {\n\n        public sound = null;\n        constructor() {\n            super();\n            bindClick(this);\n        }\n\n    }\n\n    export class btn_box extends Laya.Box {\n\n        public sound = null;\n        constructor() {\n            super();\n            bindClick(this);\n        }\n\n    }\n\n}\n\nexport default runtime;","import env from \"./env\";\nimport { toAny } from \"../utils/any\";\n\nlet _listeners = [];\n\nfunction onMessage(callback) {\n    if (callback && typeof callback == \"function\" && _listeners.indexOf(callback) < 0) {\n        _listeners.push(callback);\n    }\n}\n\nfunction postMessage(data = {}) {\n    if (env.isConchApp()) {\n        Laya.conchMarket.sendMessageToPlatform(toAny(data, \"{}\"), (resp) => {\n            env.printDebug(\"conch message callback: \", resp);\n        });\n    } else {\n        window.parent.postMessage(toAny(data, {}), '*');\n    }\n}\n\nfunction _initMessage() {\n    let name = \"__dispatchMessage__\";\n    if (typeof window !== \"undefined\") {\n        (window as any)[name] = function (data) {\n            if (data) {\n                _listeners.forEach(callback => callback(toAny(data, {})));\n            }\n        };\n    }\n    window.addEventListener(\"message\", function (msg) {\n        if (msg && msg.data) {\n            _listeners.forEach(callback => callback(toAny(msg.data, {})));\n        }\n    });\n}\n\n(function () {\n    _initMessage();\n})();\n\nexport default {\n    postMessage,\n    onMessage\n}","import { toAny } from \"../utils/any\";\n\nfunction randomUUID() {\n    let _s4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    return (_s4() + _s4() + \"-\" + _s4() + \"-\" + _s4() + \"-\" + _s4() + \"-\" + _s4() + _s4() + _s4());\n}\n\nfunction randomNumber(minNum: number, maxNum: number) {\n    switch (arguments.length) {\n        case 1:\n            return Math.random() * minNum + 1;\n        case 2:\n            return Math.random() * (maxNum - minNum + 1) + minNum;\n        default:\n            return 0;\n    }\n}\n\nfunction randomInteger(minNum: number, maxNum: number) {\n    switch (arguments.length) {\n        case 1:\n            return Math.floor(Math.random() * minNum + 1);\n        case 2:\n            return Math.floor(Math.random() * (maxNum - minNum + 1) + minNum);\n        default:\n            return 0;\n    }\n}\n\nfunction randomArray(source: any[], length: number = -1): Array<any> {\n    let randomLength = length == -1 ? source.length : length;\n    randomLength = Math.min(randomLength, source.length);\n    var copy: Array<any> = source.concat([]);\n    var result: Array<any> = [];\n    while (result.length < randomLength) {\n        let randomObj = randomArrayItem(copy);\n        result.push(randomObj);\n        copy.splice(copy.indexOf(randomLength), 1);\n    }\n    return result;\n}\n\nfunction randomArrayItem(source: any[]): any {\n    if (source.length > 0) {\n        return source[Math.floor(Math.random() * source.length)];\n    }\n    return undefined;\n}\n\nexport default {\n    randomUUID,\n    randomInteger,\n    randomNumber,\n    randomArray,\n    randomArrayItem,\n    toAny\n}","import NavStack from \"../navigator/stack\";\nimport ui from \"./ui\";\nimport screen from \"../manager/screen\";\n\nexport default class Activity extends ui {\n\n    static create(opts) {\n        class NewAct extends Activity {\n\n            opts = null;\n\n            constructor(options) {\n                super(options);\n                this.opts = opts || {};\n                Object.assign(this, this.opts);\n                NewAct.single = this.opts.single;\n                NewAct.res = this.opts.res;\n            }\n\n            onCreate() {\n                this.opts.onCreate && this.opts.onCreate();\n            }\n\n            onPause() {\n                this.opts.onPause && this.opts.onPause();\n            }\n\n            onResume() {\n                this.opts.onResume && this.opts.onResume();\n            }\n\n            onDestroy() {\n                this.opts.onDestroy && this.opts.onDestroy();\n            }\n\n            onFocus(focus) {\n                this.opts.onFocus && this.opts.onFocus(focus);\n            }\n\n            onNextProgress(progress) {\n                this.opts.onNextProgress && this.opts.onNextProgress(progress);\n            }\n\n        }\n        return NewAct;\n    }\n\n    static open(params, action) {\n        NavStack.navigate(this, params, action);\n    }\n\n    static finish() {\n        NavStack.finish(this);\n    }\n\n    static res = [];\n    static single = false;\n\n    public page = null;\n    public params = {};\n    public duration = 0;\n    public easeIn = null;\n    public easeOut = null;\n    public fromProps = null;\n    public toProps = null;\n\n    public onFocus?(focus): void;\n    public onCreate?(): void;\n    public onResume?(): void;\n    public onPause?(): void;\n    public onDestroy?(): void;\n    public onNextProgress?(progress): void;\n\n    constructor(options) {\n        super(() => { this.back(); });\n        this.ui = new Laya.Component;\n        this.width = screen.getDesignWidth();\n        this.height = screen.getDesignHeight();\n        this.params = Object.assign({}, options.params || {});\n        this.page = options.page;\n    }\n\n    //////////////////////////\n    /// navigator function\n    //////////////////////////\n\n    redirectTo(page, params = {}, action = null, single = false) {\n        this.navigate(page, params, () => {\n            this.back();\n            action && action();\n        }, single);\n    }\n\n    navigate(page, params = {}, action = null, single = false) {\n        NavStack.navigate(page, params, action, single);\n    }\n\n    back() {\n        NavStack.finish(this.page, this);\n    }\n\n    finish(page = this.page, instance = null) {\n        NavStack.finish(page, instance);\n    }\n\n    pop(number = 1) {\n        NavStack.pop(number);\n    }\n\n    popToTop() {\n        NavStack.popToTop();\n    }\n\n}","import popup from \"./popupmanager\";\nimport screen from \"../manager/screen\";\nimport pipeline from \"../pipeline\";\nimport ui from \"./ui\";\n\nexport default class PopupView extends ui {\n\n    static show(params, onHide, alias) {\n        popup.showPopup(this, params, onHide, alias);\n    }\n\n    static signleShow(params, onHide, alias) {\n        popup.hidePopup(this, null, null, alias);\n        popup.showPopup(this, params, onHide, alias);\n    }\n\n    static pipeShow(params, onHide, alias) {\n        pipeline.put(\"popup\", () => {\n            popup.showPopup(this, params, (...args) => {\n                onHide && onHide(...args);\n                pipeline.next(\"popup\");\n            }, alias);\n        })\n    }\n\n    static hide(result, alias) {\n        popup.hidePopup(this, null, result, alias);\n    }\n\n    public alias;\n    public popup;\n    public params;\n    public duration = 500;\n    public easeIn = null;\n    public easeOut = null;\n    public fromProps = null;\n    public toProps = null;\n    public exitProps = null;\n    public onShow?(): void;\n    public onHide?(): void;\n\n    public hide(result = null) {\n        popup.hidePopup(this.popup, this, result, this.alias);\n    }\n\n    constructor() {\n        super(() => {\n            this.hide();\n        });\n        this.isTranslucent = false;\n        this.canceledOnTouchOutside = false;\n        this.nonPenetrating = true;\n        this.width = screen.getDesignWidth();\n        this.height = screen.getDesignHeight();\n    }\n\n}","import toast from \"./toastmanager\";\nimport screen from \"../manager/screen\";\nimport ui from \"./ui\";\n\nexport default class ToastView extends ui {\n\n    static show(params, onHide) {\n        toast.showToast(this, params, onHide);\n    }\n\n    static hide() {\n        toast.hideToast(this);\n    }\n\n    public toast;\n    public params;\n    public duration = 200;\n    public displayDuration = 1000;\n    public easeIn = null;\n    public easeOut = null;\n    public fromProps = null;\n    public toProps = null;\n    public exitProps = null;\n    public onShow?(): void;\n    public onHide?(): void;\n\n    constructor() {\n        super(() => { this.hide() });\n        this.width = screen.getDesignWidth();\n        this.height = screen.getDesignHeight();\n    }\n\n    public hide() {\n        toast.hideToast(this.toast, this);\n    }\n\n}","import { onload } from \"../utils/onload\";\nimport { onVisibility, fixVisibility } from \"../utils/visibility\";\nimport { callHookShow, callHookHide } from \"./hook\";\nimport env from \"./env\";\n\nlet _isshow = false;\nlet _caller_show = null;\nlet _caller_hide = null;\nlet _shows = [];\nlet _hides = [];\n\nfunction callShow() {\n    if (_isshow) {\n        return;\n    }\n    _isshow = true;\n    if (_caller_show) {\n        return;\n    }\n    env.printDebug('call on show');\n    _caller_show = setTimeout(() => {\n        _caller_show = null;\n        callHookShow();\n        _shows.forEach(show => {\n            show && show();\n        });\n    }, 50);\n}\n\nfunction callHide() {\n    if (!_isshow) {\n        return;\n    }\n    _isshow = false;\n    if (_caller_hide) {\n        return;\n    }\n    env.printDebug('call on hide');\n    _caller_hide = setTimeout(() => {\n        _caller_hide = null;\n        callHookHide();\n        _hides.forEach(hide => {\n            hide && hide();\n        });\n    }, 0);\n}\n\nfunction onShow(show) {\n    if (show && typeof show == 'function' && _shows.indexOf(show) < 0) {\n        _isshow && show();\n        _shows.push(show);\n    }\n}\n\nfunction offShow(show) {\n    let index = _shows.indexOf(show);\n    if (index >= 0) {\n        _shows.splice(index, 1);\n    }\n}\n\nfunction onHide(hide) {\n    if (hide && typeof hide == 'function' && _hides.indexOf(hide) < 0) {\n        _hides.push(hide);\n    }\n}\n\nfunction offHide(hide) {\n    let index = _hides.indexOf(hide);\n    if (index >= 0) {\n        _hides.splice(index, 1);\n    }\n}\n\nfunction _initLifecycle() {\n    if (typeof window !== \"undefined\") {\n        window.addEventListener(\"pageshow\", () => {\n            callShow();\n        }, false);\n        onload().then(() => {\n            onVisibility((visibility) => {\n                if (visibility) {\n                    callShow();\n                } else {\n                    callHide();\n                }\n            })\n            callShow();\n            fixVisibility();\n        });\n    } else {\n        callShow();\n    }\n}\n\n(function () {\n    _initLifecycle();\n})();\n\nexport default {\n    onShow,\n    offShow,\n    onHide,\n    offHide\n}","let hidden, visibilityChange;\n\nfunction _init() {\n    if (hidden && visibilityChange) {\n        return;\n    }\n    if (typeof document.hidden !== \"undefined\") {\n        hidden = \"hidden\";\n        visibilityChange = \"visibilitychange\";\n    } else if (typeof document['webkitHidden'] !== \"undefined\") {\n        hidden = \"webkitHidden\";\n        visibilityChange = \"webkitvisibilitychange\";\n    } else if (typeof document['msHidden'] !== \"undefined\") {\n        hidden = \"msHidden\";\n        visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document['mozHidden'] !== \"undefined\") {\n        hidden = \"mozHidden\";\n        visibilityChange = \"mozvisibilitychange\";\n    }\n}\n\nexport function isVisibility() {\n    _init();\n    return !document[hidden];\n}\n\nexport function onVisibility(callback) {\n    if (typeof document != \"undefined\") {\n        _init();\n        document.addEventListener(visibilityChange, () => {\n            callback && callback(isVisibility());\n        }, false);\n    }\n}\n\nexport function fixVisibility() {\n    if (typeof CustomEvent != \"undefined\") {\n        _init();\n        var visibilityEvent = new CustomEvent(visibilityChange, {\n            bubbles: true,\n            cancelable: false\n        })\n        document.dispatchEvent(visibilityEvent);\n    }\n}\n","export function stringifyQuery(query) {\n    return Object.keys(query).map(key => {\n        const value = query[key];\n        return `${key}=${encodeURIComponent(value)}`;\n    }).join('&');\n}\n\nexport function decodeQuery(query) {\n    return Object.keys(query).reduce((result, key) => {\n        const value = query[key];\n        result[key] = decodeURIComponent(value);\n        return result;\n    }, {});\n}\n\nexport function parseQueryParams(path) {\n    let url = '';\n    let params = {};\n    if (!path || typeof path !== 'string') {\n        return { url, params }\n    }\n    let queryString = '';\n    let indexE = path.indexOf('?');\n    let indexW = path.indexOf('#');\n    let indexQ = path.indexOf('=');\n    if (indexE >= 0) {\n        url = path.substring(0, indexE);\n        queryString = path.substring(indexE + 1, indexW > 0 ? indexW : path.length);\n    } else if (indexQ >= 0) {\n        url = '';\n        queryString = path;\n    } else {\n        url = path;\n        queryString = '';\n    }\n    queryString.split('&').map(item => {\n        let index = item.indexOf(\"=\");\n        if (index > 0) {\n            let key = item.substring(0, index);\n            let value = item.substring(index + 1);\n            params[key] = decodeURIComponent(value);\n        }\n    });\n    return { url, params };\n}\n\nexport function appendQueryParams(path, query = {}) {\n    const { url, params } = parseQueryParams(path);\n    Object.keys(query).forEach(key => {\n        let value = query[key];\n        if (value !== undefined && value !== null) {\n            params[key] = value;\n        } else {\n            delete params[key];\n        }\n    });\n    const queryString = Object.keys(params).map(key => {\n        const value = params[key];\n        return `${key}=${encodeURIComponent(value)}`;\n    }).join('&');;\n    if (!url) {\n        return queryString;\n    }\n    if (!queryString) {\n        return url;\n    }\n    return `${url}?${queryString}`;\n}\n\nexport function getQueryString(key, def) {\n    if (typeof window !== \"undefined\" && window.location) {\n        let search = window.location.search || '';\n        var reg = new RegExp(\"(^|&)\" + key + \"=([^&]*)(&|$)\");\n        var r = search.substr(1).match(reg);\n        if (r != null) {\n            return decodeURIComponent(unescape(r[2]));\n        }\n    }\n    return def;\n}","import env from \"./env\";\nimport { initScreen } from \"./manager/screen\";\nimport { initNavigator, setNavigatorReady } from \"./navigator/init\";\nimport { callHookInit } from \"./hook\";\nimport js from \"./js\";\n\nlet _inited = false;\n\nexport function init(width: number, height: number, ...options) {\n    if (_inited) {\n        return;\n    }\n    if (!env.isLayaApp()) {\n        env.printError('Please ensure that the \\'Laya\\' library has been introduced.');\n        return;\n    }\n    env.printDebug(`init...`);\n    env.printDebug(`version: ${env.getVersion()}`);\n    env.printDebug(`debug: ${env.isDebug()}`);\n    env.printDebug(`env: ${env.getEnv()}`);\n    initScreen(false, width, height, ...options);\n    callHookInit(width, height, ...options);\n    _inited = true;\n}\n\nexport function init3D(width: number, height: number, ...options) {\n    if (_inited) {\n        return;\n    }\n    if (!env.isLayaApp()) {\n        env.printError('Please ensure that the \\'Laya\\' library has been introduced.');\n        return;\n    }\n    env.printDebug(`init3D...`);\n    env.printDebug(`version: ${env.getVersion()}`);\n    env.printDebug(`debug: ${env.isDebug()}`);\n    env.printDebug(`env: ${env.getEnv()}`);\n    initScreen(true, width, height, ...options);\n    callHookInit(width, height, ...options);\n    _inited = true;\n}\n\nexport function start(options, onLoaded = null, onLoadProgress = null) {\n    if (!_inited) {\n        env.printError('Please complete the initialization of Tape first.');\n        return;\n    }\n    if (!options) {\n        options = {};\n    }\n    let callStart = () => {\n        let newOptions = {\n            mainPage: options.mainPage || null,\n            commonRes: options.commonRes || [],\n            fileVersion: options.fileVersion,\n            onLoadProgress: (progress) => {\n                options.onLoadProgress && options.onLoadProgress(progress);\n                onLoadProgress && onLoadProgress(progress);\n            },\n            onLoaded: () => {\n                onLoaded && onLoaded();\n                options.onLoaded && options.onLoaded();\n            }\n        }\n        initNavigator(newOptions);\n        setNavigatorReady();\n    }\n    if (options.vConsole) {\n        js.loadJs(\"https://cdn.bootcdn.net/ajax/libs/vConsole/3.3.4/vconsole.min.js\").then(() => {\n            try {\n                if (typeof window !== \"undefined\" && typeof window['VConsole'] !== \"undefined\") {\n                    new window['VConsole']();\n                }\n            } catch (error) {\n            }\n        }).catch(() => { }).then(() => {\n            callStart();\n        });\n    } else {\n        callStart();\n    }\n}"],"sourceRoot":""}